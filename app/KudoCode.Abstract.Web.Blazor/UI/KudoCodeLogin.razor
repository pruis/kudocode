@using KudoCode.Contracts
@using Microsoft.AspNetCore.Components
@using Microsoft.AspNetCore.Components.Web
@namespace KudoCode.Abstract.Web.Blazor

@inherits KudoCode.Abstract.Web.Blazor.KudoCodeUiComponent

<div id="Login">
	<div class="container" id="koContainer" style="max-width: 350px;">
		<div class="form-group">
			<label for="email" class="col-sm-3 ">Email</label>
			<div class="col-sm-9">
				<input @bind="@Email" type="email" id="email" placeholder="Email" class="form-control" />
			</div>
		</div>
		<div class="form-group">
			<label for="password" class="col-sm-3 ">Password</label>
			<div class="col-sm-9">
				<input @bind="@Password" type="password" id="password" placeholder="Password" class="form-control" />
			</div>
		</div>
		<div class="form-group">
			<div class="col-sm-9 col-sm-offset-3">
				<button @onclick="@OnLogin" class="btn btn-primary btn-block" id="LoginBtn">login</button>
			</div>
		</div>
	</div> <!-- ./container -->
</div>


@functions
{

	public string Password { get; set; }
	public string Email { get; set; }

	public KudoCodeLogin()
	{
#if DEBUG
		Password = "1234";
		Email = "testb@testc.com";
#endif
	}

	[Parameter]
	public EventCallback<GetTokenRequest> Login { get; set; }

	async void OnLogin(object args)
	{
		await Login.InvokeAsync(new GetTokenRequest()
		{
			Email = this.Email,
			Password = this.Password
		});
	}

}